(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2634"],{"+KeA":function(t,e,i){"use strict";var a=i("rPUD");i.n(a).a},FyfS:function(t,e,i){t.exports={default:i("Rp86"),__esModule:!0}},NAu4:function(t,e,i){},Rp86:function(t,e,i){i("bBy9"),i("FlQf"),t.exports=i("fXsU")},fXsU:function(t,e,i){var a=i("5K7Z"),n=i("fNZA");t.exports=i("WEpk").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},g4Yg:function(t,e,i){"use strict";var a=i("NAu4");i.n(a).a},lAbF:function(t,e,i){"use strict";i.r(e);var a=i("FyfS"),n=i.n(a),l=i("t3Un");function o(t){return Object(l.a)({url:"/weapp/queryAudio",method:"post",data:t})}function r(t){return("00"+t).substr(t.length)}var s=i("4d7F"),u=i.n(s),c=i("vDqi"),f=i.n(c),d=new(window.AudioContext||window.webkitAudioContext);function h(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new u.a(function(i,a){f.a.get(t,{responseType:"arraybuffer"}).then(function(t){d.decodeAudioData(t.data,function(t){e?function(t){console.log("listenSound:");var e=d.createBufferSource();e.buffer=t,e.connect(d.destination),e.start()}(t):function(t){var e=d.createBufferSource(),i=d.createAnalyser();e.buffer=t,e.connect(i),i.connect(d.destination),i.fftSize=128;var a=i.frequencyBinCount,l=new Uint8Array(a);i.getByteFrequencyData(l),e.start(),i.getByteTimeDomainData(l);var o=1e3*t.duration;return new u.a(function(t){var e=[],a=0,r=setInterval(function(){i.getByteTimeDomainData(l);var s=0,u=!0,c=!1,f=void 0;try{for(var d,h=n()(l);!(u=(d=h.next()).done);u=!0){var p=d.value;s+=p}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}var m=Math.abs(8192-s)/10;if(m<3&&(m=3),e.push(m),(a+=10)>o){clearInterval(r);var v=function(t){for(var e=[],i=0;i<t.length;i++)t[i]<t[i+1]/2&&(t[i]=t[i+1]/2),t[i]/2>t[i+1]&&(t[i+1]=t[i]/2);for(var a=0,n=0;n<t.length;n++)if(n%9==0){var l=(t[n]+t[n+1]+t[n+2]+t[n+3]+t[n+4]+t[n+5]+t[n+6]+t[n+7]+t[n+8])/9,o=Math.round(l);e.push(o),o>a&&(a=o)}for(var r=0;r<e.length;r++)e[r]<e[r+1]/2&&(e[r]=Math.round(e[r+1]/2)),e[r]/2>e[r+1]&&(e[r+1]=Math.round(e[r]/2));for(var s=100/a,u=0;u<e.length;u++)e[u]>3&&(e[u]=Math.round(e[u]*s)),e[u]<3&&(e[u]=3),4===e[u]&&(e[u]=5);e.pop();var c=105-e.length;if(c>0){var f=new Array(c);f.fill(3),e=e.concat(f)}return e}(e);t(v)}},10)})}(t).then(function(t){i(t)})})}).catch(function(t){console.log(t),a(t)})})}Math.easeInOutQuad=function(t,e,i,a){return(t/=a/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e};var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function m(t,e,i){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=t-a,l=0;e=void 0===e?500:e;!function t(){l+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(l,a,n,e)),l<e?p(t):i&&"function"==typeof i&&i()}()}var v={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, prev, pager, next"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&m(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&m(0,800)}}},g=(i("g4Yg"),i("KHd+")),b=Object(g.a)(v,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden},staticStyle:{float:"right"}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},[],!1,null,"7831a139",null);b.options.__file="index.vue";var y="https://image-1256378396.cos.ap-guangzhou.myqcloud.com/",_=[],k={name:"Dashboard",components:{Pagination:b.exports},filters:{dateFilter:function(t,e){return t?function(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in i)if(new RegExp("("+a+")").test(e)){var n=i[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?n:r(n))}return e}(new Date(t),e):""}},data:function(){return{levels:[{value:"all"},{value:"ssr"},{value:"sr"},{value:"r"},{value:"n"},{value:"m"}],total:0,images:[],shadow:["height:10px","height:20px","height:30px"],listLoading:!0,diaVisible:!1,imageVisible:!1,cate:"Right",list:[],listQuery:{pageNo:1,pageSize:10,title:"",level:""},siki:{file_id:"",title:"",c_name:"",serifu:"",koner:"",roma:"",src_image:"",src_video:"",stars:1}}},computed:{foo:function(){return"welcome "+this.name}},created:function(){var t=this;this.fetchData(),setTimeout(function(){t.name="smith"},3e3)},mounted:function(){},updated:function(){},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;1===e&&(this.listQuery.pageNo=e),this.listQuery.title=this.listQuery.title.trim(),"all"===this.listQuery.level&&(this.listQuery.level=""),"Right"===this.cate?function(t){return Object(l.a)({url:"/weapp/queryList",method:"post",data:t})}(this.listQuery).then(function(e){var i=e.data.data;if(i){var a=i.pop();a&&(t.total=a.total),t.list=i,t.listLoading=!1}}):o().then(function(e){var i=e.data.data,a=i.content,l=i.t_audio;t.list=[];var o=!0,r=!1,s=void 0;try{for(var u,c=n()(l);!(o=(u=c.next()).done);o=!0){var f=u.value.file_id;_.push(f)}}catch(t){r=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw s}}var d=!0,h=!1,p=void 0;try{for(var m,v=n()(a);!(d=(m=v.next()).done);d=!0){var g=m.value.Key,b=g.substr(0,g.indexOf("."));if(!_.includes(b)&&(!t.listQuery.level||g.split("_")[0]===t.listQuery.level)){var y={file_id:b};t.list.push(y)}}}catch(t){h=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(h)throw p}}t.total=t.list.length})},showImage:function(){var t=this;this.images=[],Object(l.a)({url:"/weapp/findImage",method:"post"}).then(function(e){var i=t.siki.file_id.split("_"),a=i[0],l=i[1],o=e.data.data.content,r=!0,s=!1,u=void 0;try{for(var c,f=n()(o);!(r=(c=f.next()).done);r=!0){var d=c.value,h=d.Key.split(".")[0].split("_");if(-1!==h.indexOf(a)&&-1!==h.indexOf(l)){var p=y+d.Key;t.images.push(p)}}}catch(t){s=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(s)throw u}}t.imageVisible=!0})},selectImage:function(t){this.siki.src_image=t,this.imageVisible=!1},hideDia:function(){this.initSiki()},serConfirm:function(){var t=this;"Right"===this.cate?function(t){return Object(l.a)({url:"/weapp/updatePublish",method:"post",data:t})}(this.siki).then(function(e){t.fetchData(),t.initSiki(),t.showInfo("已更新!")}):function(t){return Object(l.a)({url:"/weapp/publishAudio",method:"post",data:t})}(this.siki).then(function(e){t.fetchData(),t.initSiki(),t.showInfo("已保存!")})},initSiki:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.initShadow(),t){var e=t.file_id;this.siki={shadow:"",file_id:e,title:t.title,c_name:"",serifu:t.serifu,koner:t.koner,roma:t.roma,src_image:t.src_image,src_video:t.src_video,stars:t.stars},t.title&&(this.fillCname(),this.findAudio(e)),this.diaVisible=!0}else this.siki={shadow:"",file_id:"",title:"",c_name:"",serifu:"",koner:"",roma:"",src_image:"",src_video:"",stars:1},this.diaVisible=!1},findAudio:function(t){var e=this;o({file_id:t}).then(function(t){var i=t.data.data.t_audio[0].shadow;e.initShadow(i.split(","))})},fillCname:function(){this.siki.title&&(this.siki.c_name=this.siki.title.split("_")[0])},initShadow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.shadow=[],this.siki.shadow=t.join(",");var e=!0,i=!1,a=void 0;try{for(var l,o=n()(t);!(e=(l=o.next()).done);e=!0){var r="height:"+l.value+"px";this.shadow.push(r)}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}},loadAudio:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.siki.file_id;e&&(i=e.file_id);var a=i+".mp3",n=y.replace("image","audio")+a;this.showInfo("【"+a+"】播放中..."),h(n).then(function(e){t.initShadow(e)})},showInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.$message({message:t,type:e})}}},w=(i("+KeA"),Object(g.a)(k,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body-container"},[i("el-form",{staticClass:"siki-form-inline",attrs:{inline:!0,model:t.listQuery}},[i("el-form-item",{staticClass:"search-item",attrs:{label:""}},[i("el-select",{attrs:{size:"small",placeholder:"level"},on:{change:function(e){t.fetchData(1)}},model:{value:t.listQuery.level,callback:function(e){t.$set(t.listQuery,"level",e)},expression:"listQuery.level"}},t._l(t.levels,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{staticClass:"search-item",attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"title"},nativeOn:{keyup:function(e){t.fetchData(1)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}})],1),t._v(" "),i("el-form-item",{staticClass:"search-item",attrs:{label:""}},[i("el-radio-group",{attrs:{size:"small"},on:{change:function(e){t.fetchData(1)}},model:{value:t.cate,callback:function(e){t.cate=e},expression:"cate"}},[i("el-radio-button",{attrs:{label:"Left"}}),t._v(" "),i("el-radio-button",{attrs:{label:"Right"}})],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"siki-tabel",attrs:{data:t.list,"highlight-current-row":"",border:""}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-form",{staticClass:"siki-tabel-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"level"}},[i("span",[t._v(t._s(e.row.level))])]),t._v(" "),i("el-form-item",{attrs:{label:"c_date"}},[i("span",[t._v(t._s(t._f("dateFilter")(e.row.c_date,"yyyy-MM-dd hh:mm:ss")))])]),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"roma"}},[i("span",[t._v(t._s(e.row.roma))])]),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"serifu"}},[i("span",[t._v(t._s(e.row.serifu))])]),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"koner"}},[i("span",[t._v(t._s(e.row.koner))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"stars",label:"sort",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{prop:"file_id",label:"file_id",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"title",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"serifu",label:"serifu","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{label:"operate",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(i){t.initSiki(e.row)}}}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",circle:"",size:"mini"},on:{click:function(i){t.loadAudio(e.row)}}})]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0&&"Right"===t.cate,expression:"total > 0 && cate === 'Right'"}],attrs:{total:t.total,page:t.listQuery.pageNo,limit:t.listQuery.pageSize,layout:"total, prev, pager, next, jumper"},on:{"update:page":function(e){t.$set(t.listQuery,"pageNo",e)},"update:limit":function(e){t.$set(t.listQuery,"pageSize",e)},pagination:t.fetchData}}),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0&&"Left"===t.cate,expression:"total > 0 && cate === 'Left'"}],attrs:{total:t.total,layout:"total"}}),t._v(" "),i("el-dialog",{attrs:{visible:t.diaVisible,"before-close":t.hideDia,"close-on-click-modal":!1,title:t.siki.file_id,"custom-class":"dia-body"},on:{"update:visible":function(e){t.diaVisible=e}}},[i("el-form",{attrs:{"label-width":"80px"}},[i("div",{staticClass:"box-shadow"},[i("img",{staticClass:"box-image pointer",attrs:{src:t.siki.src_image},on:{click:function(e){t.showImage()}}}),t._v(" "),i("div",{staticClass:"box-image pointer",on:{click:function(e){t.loadAudio()}}}),t._v(" "),t._l(t.shadow,function(t,e){return i("div",{key:e,staticClass:"ele",style:t})})],2),t._v(" "),i("el-form-item",{attrs:{label:"c_name"}},[i("el-input",{attrs:{readonly:!0},model:{value:t.siki.c_name,callback:function(e){t.$set(t.siki,"c_name",e)},expression:"siki.c_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"title"}},[i("el-input",{attrs:{placeholder:"input title"},on:{blur:function(e){t.fillCname()}},model:{value:t.siki.title,callback:function(e){t.$set(t.siki,"title",e)},expression:"siki.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"serifu"}},[i("el-input",{attrs:{placeholder:"input serifu"},model:{value:t.siki.serifu,callback:function(e){t.$set(t.siki,"serifu",e)},expression:"siki.serifu"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"koner"}},[i("el-input",{attrs:{placeholder:"input koner"},model:{value:t.siki.koner,callback:function(e){t.$set(t.siki,"koner",e)},expression:"siki.koner"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"roma"}},[i("el-input",{attrs:{placeholder:"input roma"},model:{value:t.siki.roma,callback:function(e){t.$set(t.siki,"roma",e)},expression:"siki.roma"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"stars"}},[i("el-input-number",{attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.siki.stars,callback:function(e){t.$set(t.siki,"stars",e)},expression:"siki.stars"}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.initSiki()}}},[t._v("关闭")]),t._v(" "),"Right"==t.cate?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.serConfirm()}}},[t._v("确认更新")]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.serConfirm()}}},[t._v("确认添加")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.imageVisible,title:"images:"},on:{"update:visible":function(e){t.imageVisible=e}}},t._l(t.images,function(e,a){return i("img",{key:a,staticClass:"box-image pointer",attrs:{src:e},on:{click:function(i){t.selectImage(e)}}})}))],1)},[],!1,null,null,null));w.options.__file="index.vue";e.default=w.exports},rPUD:function(t,e,i){}}]);